# respectify-php

PHP library for the Respectify API.

Basics to develop:
```bash
$ brew install php
$ brew install composer
```

If you want to run unit tests:
```bash
$ composer require --dev phpunit/phpunit mockery/mockery 
```

To refresh autoloaded types (eg solve odd issues where a clearly existing type is not found):
```
$ composer dump-autoload
```

Doc is generated by converting PHPDoc comments to XML and then to Markdown:

```
python build.py
```

Details:

```bash
# $ composer require --dev saggre/phpdocumentor-markdown # this uses phpdoc to generator Markdown
# no longer required, have a custom version, see below

$ alias phpdoc="docker run --rm -v \"$(pwd)\":/data phpdoc/phpdoc:3"

#$ phpdoc -d src -t docs --template="xml"

# Run phpDocumentor with --template argument pointed to markdown template inside vendor directory
$ phpdoc --directory=src --target=docs --template="phpdocumentor-markdown-customised/themes/markdown" --title="Respectify PHP Library" -c phpdoc.xml
```

This runs phpdocumentor as a Docker image, aliased to phpdoc. (Looking at there page there is no simpler installation method, certainly not via `compose`. There's some other (yet another?) package manager called `phive`.)

Customised template: to get the index.md file containing what we want we need to customuse the Markdown template.
That is checked in to phpdocumentor-markdown-customised (it's a modified version of MIT-licensed https://github.com/Saggre/phpDocumentor-markdown)

The Python script runs this, and then copies the files to the Docusaurus docs/PHP path:
../respectify/discussion-arena-docgen/respectify-docs/docs/PHP




